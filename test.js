


var htmlparser = require('htmlparser');
module.exports =() => {
class Post {
	constructor(){
		this.post='<p><span style=\"font-weight: 400;\">Since inception, America has been a beacon of hope and opportunity for billions- internationally and at home. The United States is meant to be the land where dreams can come true if you are willing to put in the hard work. But all that glitters isn’t gold: millions fall through the cracks, left to drown while those in boats and life preservers scoff and look down their noses. </span></p>\n<p><span style=\"font-weight: 400;\">One of the largest elephants in the room in America is addiction. It impacts people from all walks of life and backgrounds, yet it remains stigmatized and largely unaddressed. Cries for help and solutions to the substance abuse epidemic are hushed and placated by slow coming legislation and temporary fixes. With thousands dying every day due to overdose, we can not afford to continue pretending addiction isn’t a public health crisis. </span></p>\n<p><span style=\"font-weight: 400;\">America is failing its citizens in need in a dozen different ways: here 4 ways we fail the addicted community.</span></p>\n<p>&nbsp;</p>\n<p><img  title=\"Sober Privilege? 4 Ways America Fails Addicts - Harbor Village\" class=\"aligncenter size-medium wp-image-17163\" src=\"https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8855f1c950d20001a0f8b5_tongue-e1464965856644-300x300.jpg\"  alt=\"Sober Privilege? 4 Ways America Fails Addicts image\"  width=\"300\" height=\"300\" srcset=\"https://harborvillageflorida.com/wp-content/uploads/2016/03/tongue-e1464965856644-300x300.jpg 300w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a836e5673b1960001f299b6_tongue-e1464965856644-150x150.jpg 150w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8855f4c950d20001a0f8ba_tongue-e1464965856644-1024x1024.jpg 1024w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8855f6b846770001bc756a_tongue-e1464965856644-160x160.jpg 160w\" sizes=\"(max-width: 300px) 100vw, 300px\" /></p>\n<h2 style=\"text-align: center;\"><span style=\"color: #003366;\"><b>Enabling Substance Abuse</b></span></h2>\n<p><span style=\"font-weight: 400;\">America is an enabler. From the medical and pharmaceutical companies to the entertainment industry, American society enables substance abuse to the point of nearly promoting it. Doctors and pharmacists profit from prescribing dangerous, addictive painkillers- </span><i><span style=\"font-weight: 400;\">legally.</span></i><span style=\"font-weight: 400;\"> They bypass important screenings and patient details that could save lives for their own convenience, while others are simply not trained to do so. </span></p>\n<p><span style=\"font-weight: 400;\">Substance abuse is in our music, movies, and television shows to add drama or emphasize a party lifestyle. It’s as if to say you can’t have fun sober. Then when young and impressionable people fall victim to the real effects of drug or alcohol abuse, Hollywood is quick to deflect blame. While it is true that other factors also contributed to the rapid increase of substance abuse in America, normalization through our entertainment has done nothing to help.</span></p>\n<p>&nbsp;</p>\n<p><img  title=\"Sober Privilege? 4 Ways America Fails Addicts - Harbor Village\" class=\"aligncenter  wp-image-18302\" src=\"https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a85cd496b27d5000199b41d_rsz_sad-1058245_960_720-300x300.jpg\"  alt=\"Sober Privilege? 4 Ways America Fails Addicts image\"  width=\"302\" height=\"302\" srcset=\"https://harborvillageflorida.com/wp-content/uploads/2016/05/rsz_sad-1058245_960_720-300x300.jpg 300w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8373b23869260001c09c62_rsz_sad-1058245_960_720-150x150.jpg 150w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a870e62abe8c8000141b2fa_rsz_sad-1058245_960_720-1024x1024.jpg 1024w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a870e63abe8c8000141b2fd_rsz_sad-1058245_960_720-160x160.jpg 160w\" sizes=\"(max-width: 302px) 100vw, 302px\" /></p>\n<h2 style=\"text-align: center;\"><span style=\"color: #003366;\"><b>Lack of Resources</b></span></h2>\n<p><span style=\"font-weight: 400;\">No one </span><i><span style=\"font-weight: 400;\">wants</span></i><span style=\"font-weight: 400;\"> to live the life of an addict. Eventually the party ends, but being physically and mentally dependent on drugs and alcohol is a difficult tie to sever- especially alone. That’s why recovery resources are so important. Harbor Village and facilities likes us are here to provide the support and information necessary to lead a successful sober life. </span></p>\n<p><span style=\"font-weight: 400;\">Support programs and sober living communities continue the work beyond rehab, serving as a safety net as people in recovery get their lives back on track. Unfortunately, the recovery community is met with a lot of opposition on both sides. We are on the receiving end of all the blame when it comes to shortcomings in recovery. </span></p>\n<p><span style=\"font-weight: 400;\">Despite being at the mercy of insurance companies and lobbyists dictating the parameters and accessibility of treatment, lack of resources is often blamed on detox and rehab centers. Government funding is minuscule, insurance giants refuse to provide sufficient coverage, and new bills are being introduced constantly to bar honest rehabilitation facilities from reaching those in need. Why? For the same reason our focus is not on curing many disease: profit.</span></p>\n<p>&nbsp;</p>\n<p><img  title=\"Sober Privilege? 4 Ways America Fails Addicts - Harbor Village\" class=\"aligncenter size-medium wp-image-14757\" src=\"https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8614d3eb14b60001ac4106_money-860128_960_720-300x300.jpg\"  alt=\"Sober Privilege? 4 Ways America Fails Addicts image\"  width=\"300\" height=\"300\" srcset=\"https://harborvillageflorida.com/wp-content/uploads/2015/12/money-860128_960_720-300x300.jpg 300w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a870e66c164c500019abc4e_money-860128_960_720-150x150.jpg 150w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a870e680cc5b800019ec111_money-860128_960_720-1024x1024.jpg 1024w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a870e6ae638410001ca0570_money-860128_960_720-160x160.jpg 160w\" sizes=\"(max-width: 300px) 100vw, 300px\" /></p>\n<h2 style=\"text-align: center;\"><span style=\"color: #003366;\"><b>Putting Profit Over Lives</b></span></h2>\n<p><span style=\"font-weight: 400;\">Here’s a dark truth: it is more profitable to continue selling Naloxone and Suboxone than to stop producing addictive pain medication. The profit margin is the motive behind pharmaceutical companies continuing to fight legal responsibility for the thousands of deaths per year. It’s why insurance companies still deny coverage for treatment they have admitted can be life-saving. When profit matters more than human lives, we all lose. </span></p>\n<p><span style=\"font-weight: 400;\">Regrettably, this also extends into the addiction recovery industry itself. For every facility working to end the epidemic of substance abuse, another is working the system. We’ve all heard of them: they care more about keeping beds full than helping people take back control of their lives. Unfortunately it can be hard to differentiate the two. This leads to mistrust in the industry and the recovery process as a whole. How many lives have been lost because of this? Too many.</span></p>\n<p>&nbsp;</p>\n<p><img  title=\"Sober Privilege? 4 Ways America Fails Addicts - Harbor Village\" class=\"aligncenter size-medium wp-image-19909\" src=\"https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8724a6ce5e280001314cca_HB-home.jpg\"  alt=\"Sober Privilege? 4 Ways America Fails Addicts image\"  width=\"300\" height=\"300\" srcset=\"https://harborvillageflorida.com/wp-content/uploads/2016/08/stigma-300x300.jpg 300w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8724a6ce5e280001314cca_HB-home.jpg 150w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8724a6ce5e280001314cca_HB-home.jpg 1024w, https://uploads-ssl.webflow.com/5a34241d2305550001873efd/5a8724a6ce5e280001314cca_HB-home.jpg 350w\" sizes=\"(max-width: 300px) 100vw, 300px\" /></p>\n<h2 style=\"text-align: center;\"><span style=\"color: #003366;\"><b>Stigmatizing Recovery</b></span></h2>\n<p><span style=\"font-weight: 400;\">For those who are able to receive treatment and gain a new sober lifestyle, America is still unforgiving. We continue to shame people in recovery, refusing to allow them to move forward from their pasts. American society is distrustful of the addict in recovery, using the possibility of relapse as a reason to deny second chances and creating a self-fulfilling prophecy. </span></p>\n<p><span style=\"font-weight: 400;\">Imagine having to lie about who you are in order to have a fair shot at employment, housing, or basic human dignity. Minority groups across America can identify with that unfortunate reality, but for people in recovery the risks are high. Falling back into a pattern of substance abuse a period of sobriety increases the possibility of deadly overdose exponentially. When we stigmatize any group of people all we’ve done is create unnecessary strife and contention.</span></p>\n<p>&nbsp;</p>\n<h4 style=\"text-align: center;\"><b>We want to hear from you: What other ways has America failed to address the addiction epidemic? Leave your thoughts in the comments!</b></h4>\n<h4 style=\"text-align: center;\"><b>Keep Up With Trending Addiction News</b></h4>\n<h4 style=\"text-align: center;\"><b>Follow us: </b><a href=\"https://www.facebook.com/harborvillagedetox\" target=\"_blank\" rel=\"nofollow\"><b>Facebook </b></a><b>| </b><a href=\"https://twitter.com/HVDetox\" target=\"_blank\" rel=\"nofollow\"><b>Twitter </b></a><b>| </b><b>Google+</b><b> | </b><a href=\"https://www.pinterest.com/HVDetox01/\" target=\"_blank\" rel=\"nofollow\"><b>Pinterest</b></a><b> | </b><a href=\"https://instagram.com/harborvillage/\" target=\"_blank\" rel=\"nofollow\"><b>Instagram</b></a></h4>\n<p>&nbsp;</p>\n<!-- AddThis Advanced Settings generic via filter on the_content --><!-- AddThis Share Buttons generic via filter on the_content -->';
		//this.processImagesFromPostContent();
	}

	async _handler() {
    return new Promise((resolve, reject) => {
        new htmlparser.DefaultHandler((error, dom) => {
            if (error) {
                reject(error);
            }
            else {
                resolve(dom);
            }
        });
    });
}
async processImagesFromPostContent(){
            let images=[];

            var handler = await new htmlparser.DefaultHandler(function (error, dom) {
                if (error)
                console.log(error);
                else
                   console.log('');
            });
            var parser = new htmlparser.Parser(handler);
            parser.parseComplete(this.post);
            var tags = await htmlparser.DomUtils.getElements({ tag_name: 'img'},handler.dom);
            if (tags) {
                for(let t=0;t<tags.length;t++){
                    let srcset = tags[t].attribs && (tags[t].attribs.srcset);
                    let src = tags[t].attribs && (tags[t].attribs.src);
                    if(src){
                        var matches = src.match(/\bhttps?:\/\/\S+/gi);
                        images.push(matches[0]);
                    }
                    if(srcset){
                        let urls  = srcset.split(',');                        
                        for(let s=0;s<urls.length;s++){
                            var matches = urls[s].match(/\bhttps?:\/\/\S+/gi);
                            let url = matches[0];
                            images.push(url);
                        }
                    }
                }
            }
            for(let k = 0; k< images.length;k++){
                this.post = this.post.replace(images[k], 'COJOJE');
           }
           console.log(this.post);
        }

}
	return new Post();
};

